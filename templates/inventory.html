{% extends "base.html" %}
{% load static %}
{% block title %}Inventory{% endblock %}
{% block header %}Inventory{% endblock %}
{% block content %}

<style>
    /* Disable scrolling on the entire page */
    html, body {
        overflow: hidden;
    }

    /* Scrollbar Styling */
    .inventory-categories::-webkit-scrollbar {
        width: 8px; /* Slim scrollbar width */
    }
    
    .inventory-categories::-webkit-scrollbar-track {
        background: transparent; /* Transparent track */
    }
    
    .inventory-categories::-webkit-scrollbar-thumb {
        background: #4b5563; /* Thumb color */
        border-radius: 10px; /* Rounded scrollbar */
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4); /* Add shadow to scrollbar */
    }
    
    .inventory-categories::-webkit-scrollbar-thumb:hover {
        background: #374151; /* Darker color on hover */
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.6); /* Stronger shadow on hover */
    }
    
    /* Firefox scrollbar */
    .inventory-categories {
        scrollbar-width: thin; /* Thin scrollbar */
        scrollbar-color: #4b5563 transparent; /* Thumb and track color */
    }

    /* Category Container Styling */
    .inventory-categories {
        background-color: #2d3748; /* Subtle dark gray background */
        border-radius: 10px; /* Rounded corners */
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3); /* Shadow for the container */
        transition: box-shadow 0.3s ease-in-out;
        max-height: 80vh; /* Restored original height */
        overflow-y: auto; /* Enable vertical scrolling */
        padding: 10px; /* Added padding */
    }
    .inventory-categories:hover {
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4); /* Elevate on hover */
    }

    /* Category Item Styling */
    .inventory-categories ul li a {
        background-color: #4a5568; /* Subtle gray background */
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2); /* Shadow for each item */
        transition: all 0.3s ease;
        color: white; /* Text color */
        padding: 10px; /* Added padding */
        margin-bottom: 10px; /* Added margin */
        border-radius: 5px; /* Added border radius */
    }
    .inventory-categories ul li a:hover {
        background-color: #2d3748; /* Darker background on hover */
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3); /* Elevate on hover */
        transform: scale(1.05); /* Slight zoom effect */
    }

    /* Item Cube Styling */
    .item-cube {
        background-color: #4a5568; /* Subtle gray background */
        border-radius: 10px; /* Rounded corners */
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3); /* Shadow for the container */
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        margin: 10px; /* Added margin */
        text-align: center;
        cursor: pointer;
        width: 120px; /* Increased width */
        height: 120px; /* Increased height */
        display: flex;
        flex-direction: column;
        justify-content: center;
        position: relative;
        opacity: 0;
        transform: translateY(20px);
        animation: fadeInUp 0.5s forwards;
    }
    .item-cube img {
        width: 100%;
        height: 100%;
        object-fit: cover; /* Ensure images fit within the box */
        border-radius: 10px; /* Match the border radius of the box */
    }
    .item-cube h3 {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.288); /* Darkish background */
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 10px; /* Match the border radius of the box */
        margin: 0;
    }
    .item-cube:hover {
        transform: scale(1.05); /* Slight zoom effect */
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.47); /* Elevate on hover */
    }

    .item-cube.selected {
        border: 2px solid #2563eb; /* Blue neon border */
        box-shadow: 0 0 10px #2563eb; /* Neon glow effect */
    }

    /* Adjust grid to fit six items in a row */
    #itemsContainer {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 10px;
        transition: all 0.3s ease-in-out;
    }

    @keyframes fadeInUp {
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Search Bar Styling */
    .search-bar {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 20px;
        margin-top: -30px;
    }
    .search-bar input[type="text"] {
        width: 200px; /* Smaller width */
        padding: 8px; /* Smaller padding */
        border: 2px solid #4a5568;
        border-right: none;
        border-radius: 20px 0 0 20px;
        background-color: #2d3748;
        color: white;
        outline: none;
        transition: all 0.3s ease;
    }
    .search-bar input[type="text"]:focus {
        border-color: #2563eb;
        box-shadow: 0 0 10px rgba(37, 99, 235, 0.5);
    }
    .search-bar .search-icon {
        padding: 8px 16px; /* Smaller padding */
        border: 2px solid #4a5568;
        border-left: none;
        border-radius: 0 20px 20px 0;
        background-color: #2563eb;
        color: white;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .search-bar .search-icon:hover {
        background-color: #1e40af;
        border-color: #1e40af;
    }

    /* Sidebar Styling */
    .selection-sidebar {
        position: relative; /* Change from fixed to relative */
        width: 0; /* Start with 0 width */
        min-width: 0;
        height: 100vh;
        background-color: #2d3748;
        box-shadow: -2px 0 10px rgba(0, 0, 0, 0.5);
        transition: all 0.3s ease-in-out;
        padding: 0; /* Start with no padding */
        overflow: hidden; /* Hide content when closed */
    }
    .selection-sidebar.open {
        width: 300px; /* Expand to full width when open */
        min-width: 300px;
        padding: 20px; /* Restore padding when open */
    }
    .selected-item-box {
        background-color: #374151;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        padding: 10px;
        margin-bottom: 10px;
        animation: fadeIn 0.5s ease-in-out;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.75rem; /* Smaller font size */
        width: 100%; /* Ensure the box takes full width */
    }
    .selected-item-box h4 {
        margin: 0;
        font-size: 0.875rem; /* Smaller font size */
    }
    .selected-item-box p {
        margin: 5px 0;
        font-size: 0.75rem; /* Smaller font size */
    }
    .item-counter {
        display: flex;
        align-items: center;
    }
    .item-counter button {
        background-color: #1f2937; /* Darker background color */
        color: white;
        border: none;
        padding: 5px;
        border-radius: 4px; /* Square shape */
        cursor: pointer;
        margin: 5px;
        font-size: 0.75rem; /* Smaller font size */
        display: flex;
        align-items: center;
        justify-content: center;
        width: 24px;
        height: 24px;
        transition: background-color 0.3s ease, box-shadow 0.3s ease;
        box-shadow: 0 0 5px #2563eb; /* Neon glow effect */
    }
    .item-counter button:hover {
        background-color: #111827; /* Darker hover background color */
        box-shadow: 0 0 10px #1e40af; /* Stronger neon glow effect */
    }
    .item-counter button svg {
        width: 12px;
        height: 12px;
    }
    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* Adjust main content area when sidebar is open */
    .main-content {
        transition: all 0.3s ease-in-out;
        width: 100%;
    }
    .main-content.sidebar-open {
        width: calc(100% - 300px); /* Adjust based on sidebar width */
    }

    /* Fixed size for scrollbar in the sidebar for items */
    .selection-sidebar .scrollable-content {
        max-height: 45vh; /* Half height */
        overflow-y: auto; /* Enable vertical scrolling */
        padding-right: 10px; /* Added padding */
    }
    .selection-sidebar .scrollable-content::-webkit-scrollbar {
        width: 6px; /* Smaller scrollbar width */
    }
    .selection-sidebar .scrollable-content::-webkit-scrollbar-track {
        background: #2d3748; /* Match sidebar background */
    }
    .selection-sidebar .scrollable-content::-webkit-scrollbar-thumb {
        background: #4a5568; /* Match item background */
        border-radius: 6px; /* Rounded scrollbar */
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4); /* Add shadow to scrollbar */
    }
    .selection-sidebar .scrollable-content::-webkit-scrollbar-thumb:hover {
        background: #374151; /* Darker color on hover */
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.6); /* Stronger shadow on hover */
    }
    .selection-sidebar .scrollable-content {
        scrollbar-width: thin; /* Thin scrollbar */
        scrollbar-color: #4a5568 #2d3748; /* Thumb and track color */
    }

    /* Additional options styling */
    .options {
        margin-top: 5px;
        padding: 5px; /* Added padding */
    }
    .options label {
        display: inline-block;
        margin-bottom: 5px;
        cursor: pointer;
        padding: 5px; /* Reduced padding */
        border-radius: 5px;
        background-color: transparent;
        color: white;
        transition: background-color 0.3s ease, box-shadow 0.3s ease;
        font-size: 0.75rem; /* Smaller font size */
    }

    .options input[type="radio"] {
        display: none;
    }

    /* .options input[type="radio"]:checked + label {
        background-color: #2563eb;
        box-shadow: 0 0 10px #2563eb;
    } */

    .options label:hover {
        background-color: #374151;
    }

    /* Radio button styling */
    .options input[type="radio"] {
        display: none;
    }
    .options1 input[type="radio"] {
        display: none;
    }

    .options label {
        display: inline-block;
        margin-bottom: 5px;
        margin: 5px;
        cursor: pointer;
        padding: 5px; /* Reduced padding */
        border-radius: 5px;
        background-color: #4a5568;
        color: white;
        transition: box-shadow 0.3s ease;
        border: 2px solid transparent;
        font-size: 0.75rem; /* Smaller font size */
        width: 48%; /* Take half the width */
        text-align: center; /* Center the text */
    }

    .options1 label {
        display: inline-block;
        /* margin-bottom: 5px; */
        margin: 3px;
        cursor: pointer;
        padding: 5px; /* Reduced padding */
        border-radius: 5px;
        background-color: #4a5568;
        color: white;
        transition: box-shadow 0.3s ease;
        border: 2px solid transparent;
        font-size: 0.75rem; /* Smaller font size */
        width: 28%; /* Take half the width */
        text-align: center; /* Center the text */
    }


    .options input[type="radio"]:checked + label {
        border-color: #2563eb;
        box-shadow: 0 0 10px #2563eb;
    }
    .options1 input[type="radio"]:checked + label {
        border-color: #2563eb;
        box-shadow: 0 0 10px #2563eb;
    }

    .options label:hover {
        background-color: #374151;
    }
    .options1 label:hover {
        background-color: #374151;
    }

    /* Checkout button styling */
    .options button.checkout {
        width: 100%;
        padding: 10px;
        border: none;
        border-radius: 5px;
        background-color: #2563eb;
        color: white;
        cursor: pointer;
        transition: background-color 0.3s ease, box-shadow 0.3s ease;
        box-shadow: 0 0 5px #2563eb; /* Neon glow effect */
    }

    .options button.checkout:hover {
        background-color: #1e40af;
        box-shadow: 0 0 10px #1e40af; /* Stronger neon glow effect */
    }

    /* Amounts font size */
    #totalAmount, #gstAmount, #grandTotal {
        font-size: 0.875rem; /* Smaller font size */
        margin-bottom: 5px; /* Reduced margin */
    }

    .upi-qr-code {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        z-index: 200;
    }
    .upi-qr-code img {
        max-width: 100%;
        height: auto;
    }
    .upi-qr-code .close-btn {
        position: absolute;
        top: 10px;
        right: 10px;
        cursor: pointer;
    }

    .print-icon {
        transition: box-shadow 0.3s ease;
    }
    .print-icon.glow {
        box-shadow: 0 0 10px #2563eb;
    }

    /* Update flex container */
    .flex {
        transition: all 0.3s ease-in-out;
    }

    .sidebar-open .flex {
        width: calc(100% - 300px)    }
    /* .hedtex {
        margin-right: 130px;
    } */

    /* Update main content wrapper */
    .content-wrapper {
        display: flex;
        width: 100%;
        transition: all 0.3s ease-in-out;
    }

    /* Update main content area */
    .main-content {
        flex: 1;
        transition: all 0.3s ease-in-out;
        padding: 20px;
    }
</style>

<!-- Update HTML structure -->
<div class="content-wrapper">
    <div class="main-content">
        <h1 class="text-3xl font-bold mb-4">Inventory</h1>
        <div class="search-bar">
            <form method="get" class="flex">
                <input type="text" id="searchInput" name="search" placeholder="Search items...">
                <div class="search-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 4a6 6 0 100 12 6 6 0 000-12zm0 0l6 6" />
                    </svg>
                </div>
            </form>
        </div>
        <div class="flex">
            <div class="w-1/5 p-4 inventory-categories">
                <h2 class="text-xl font-bold mb-4 text-white">Categories</h2>
                <ul>
                    {% for category in categories %}
                    <li class="mb-2"><a href="#" class="block py-3 px-4 rounded category-link" data-category-id="{{ category.id }}">{{ category.name }}</a></li>
                    {% endfor %}
                </ul>
            </div>
            <div id="itemsContainer" class="w-4/5 ml-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-x-1 gap-y-2"> <!-- Decreased gap between columns -->
                <!-- Items will be loaded here dynamically -->
            </div>
        </div>
    </div>
    
    <div id="selectionSidebar" class="selection-sidebar">
        <div class="flex justify-between items-center">
            <h2 class="text-2xl font-bold ml-3 mr-0">Selected Items</h2>
            <input type="checkbox" id="printButton" class="hidden">
            <label for="printButton" class="cursor-pointer print-icon">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 9v6h12V9M6 9V5a2 2 0 012-2h8a2 2 0 012 2v4M6 9h12M6 15h12M9 18h6" />
                </svg>
            </label>
        </div>
        <div class="scrollable-content">
            <ul id="selectedItemsList" class="space-y-2">
                <!-- Selected items will be appended here -->
            </ul>
        </div>
        <div class="options">
            <p id="totalAmount" class="text-sm -">Total   : ₹0.00</p>
            <p id="gstAmount" class="text-sm ">GST (18%): ₹0.00</p>
            <p id="grandTotal" class="text-lg font-bold">Grand Total: ₹0.00</p>
        </div>
        <label class="m-0 p-0">Payment Type:</label>
        <div class="options flex justify-between w-full">
            <div class="button-group flex w-full">
                <input type="radio" id="payment_online" name="payment_type" value="online">
                <label for="payment_online" class="w-1/2">Online</label>
                <input type="radio" id="payment_cash" name="payment_type" value="cash">
                <label for="payment_cash" class="w-1/2">Cash</label>
            </div>
        </div>
        <label class="m-0 p-0">Order Type:</label>
        <div class="options1">
            <div class="button-group">
                <input type="radio" id="order_dine_in" name="order_type" value="dine_in">
                <label for="order_dine_in">Dine In</label>
                <input type="radio" id="order_delivery" name="order_type" value="delivery">
                <label for="order_delivery">Delivery</label>
                <input type="radio" id="order_take_away" name="order_type" value="take_away">
                <label for="order_take_away">Take Away</label>
            </div>
        </div>
        <div class="options">
            <button class="checkout">Checkout</button>
        </div>
    </div>
</div>

<div id="upiQrCode" class="upi-qr-code">
    <span class="close-btn" onclick="closeQrCode()">✖</span>
    <span class="close-btn" onclick="closeQrCode()">✖</span>
    <img id="upiQrCodeImage" src="" alt="UPI QR Code">
</div>

<script src="{% static 'js/inventory.js' %}"></script>

{% endblock %}
